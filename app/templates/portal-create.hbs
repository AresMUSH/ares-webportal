{{page-title this.model.portal.name}}


<h1>Create {{this.model.portal.name}} Portal</h1>

    <ul class="nav nav-tabs">
        <li class="active"><a data-bs-toggle="tab" href="#general">General</a></li>
        <li><a data-bs-toggle="tab" href="#desc">Description & Society</a></li>
        <li><a data-bs-toggle="tab" href="#creatures">Creatures & NPCs</a></li>
        <li><a data-bs-toggle="tab" href="#events">Trivia & Events</a></li>
    </ul>



    <div class="tab-content">

      <div id="general" class="tab-pane fade show active">
        <div class="form-group row">
          <div class="col-sm-3">
            <p><b>Name*</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{input type="text" size=25 value=this.model.portal.name}}</p>
          </div>
          <div class="col-sm-3">
            <p><b>GMs</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{#power-select-multiple selected=this.model.portal.gms options=this.model.characters searchField="name" onChange=(action "gmsChanged") as |char|}}
              {{char.name}}
            {{/power-select-multiple}}</p>
          </div>

          <div class="col-sm-3">
            <p><b>Location</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{input type="text" size=25 value=this.model.portal.location}}</p>
          </div>



          <div class="col-sm-3">
            <p><b>Latitude</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{input type="text" size=25 value=this.model.portal.latitude}}</p>
          </div>

          <div class="col-sm-3">
            <p><b>Longitude</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{input type="text" size=25 value=this.model.portal.longitude}}</p>
          </div>

          <div class="col col-xs-12">
            <p><label>Location known on WeirdNet?</label>
            {{input type="checkbox"  id="location_known"  checked=isKnown}}</p>
          </div>

          <div class="col-sm-3">
            <p><b>Primary School*</b></p>
          </div>

          <div class="col-sm-9">
            <p><PowerSelect @selected={{this.model.portal.primary_school}} @options={{this.model.schools}} @onChange={{action "primaryschoolChanged"}} as |school|>
              {{school}}
            </PowerSelect></p>
          </div>

          <div class="col-sm-3">
            <p><b>All Schools</b></p>
          </div>

          <div class="col-sm-9">
            <p>
              <PowerSelectMultiple @selected={{this.model.portal.all_schools}} @options={{this.model.schools}} @searchEnabled=true @searchField="name"  @placeholder="A portal can have to 5 schools of magic total" @onChange={{action "allschoolsChanged"}} as |school|>
                {{school}}
              </PowerSelectMultiple></p>
          </div>

          <div class="col-sm-3">
            <p><b>Pinterest URL</b></p>
          </div>

          <div class="col-sm-9">
            <p>{{input type="text" size=25 value=this.model.portal.pinterest}}</p>
          </div>

          <div class="col-sm-3">
            <b>Summary</b>
          </div>

          <div class="col-sm-9">
            <MarkdownEditor @text={{this.model.portal.edit_short_desc}}  rows={{10}} />
          </div>
        </div>
      </div>

      <div id="desc" class="tab-pane fade show">
        <b>Description</b>
         <MarkdownEditor @text={{this.model.portal.edit_desc}} />

        <b>Society</b>
        <MarkdownEditor @text={{this.model.portal.edit_society}} />
      </div>

      <div id="creatures" class="tab-pane fade show">
        <b>Creatures</b>
        <div class="col-sm-9">
          <PowerSelectMultiple @selected={{this.model.portal.creatures}} @options={{this.model.creatures}} @searchEnabled=true @searchField="name"  @onChange={{action "creaturesChanged"}} as |creature|>
            {{creature.name}}
          </PowerSelectMultiple>
        </div>
        <br><br>
        <b>Other Creatures</b>
        <MarkdownEditor @text={{this.model.portal.edit_other_creatures}} />

        <b>Important Figures</b>
        <MarkdownEditor @text={{this.model.portal.edit_npcs}} />
      </div>




      <div id="events" class="tab-pane fade show">
        <b>Trivia</b>
        <MarkdownEditor @text={{this.model.portal.edit_trivia}} />

        <b>RP Suggestions</b>
        <MarkdownEditor @text={{this.model.portal.edit_rp_suggestions}} />

        <div class="col-sm-3">
          <b>Plots</b>
        </div>

        <div class="col-sm-9">
          <PowerSelectMultiple @selected={{this.model.portal.plots}} @options={{this.model.plots}} @searchEnabled=true @searchField="name"  @onChange={{action "plotsChanged"}} as |plot|>
            {{plot.title}}
          </PowerSelectMultiple>
        </div>

        <b>Events</b>
        <MarkdownEditor @text={{this.model.portal.edit_events}} />
      </div>

    </div>





    <div class="action-buttons">

        <p> {{#link-to 'portals' class="btn btn-secondary"}}Cancel{{/link-to}}
            <button class="btn btn-primary" {{action 'save'}} >Save</button>
        </p>

    </div>
        {{flash-messages}}



{{outlet}}
